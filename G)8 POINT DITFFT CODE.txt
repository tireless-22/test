#include<stdio.h>
#include<math.h>
#define pi 3.14
float x[10],a[10],br[10],bi[10],Xr[10],Xi[10];
float p,q,r,s,Mag[10],pha[10];
int i;
void main()
{printf("enter input sequence x:\n");
for(i=0;i<8;i++)
scanf("%f",&x[i]);
a[0]=x[0]+x[4]; a[1]=x[0]-x[4];
a[2]=x[2]+x[6];a[3]=x[2]-x[6];
a[4]=x[1]+x[5];a[5]=x[1]-x[5];
a[6]=x[3]+x[7];a[7]=x[3]-x[7];
br[0]=a[0]+a[2];bi[0]=0; 
br[1]=a[1];bi[1]=-a[3];
br[2]=a[0]-a[2];bi[2]=0;
br[3]=a[1];bi[3]=a[3];
br[4]=a[4]+a[6];bi[4]=0;
br[5]=a[5];bi[5]=-a[7];
br[6]=a[4]-a[6];bi[6]=0;br[7]=a[5];
bi[7]=a[7];
p=((br[5]*0.707)-(bi[5]*(-0.707))); 
q=((br[5]*(-0.707))+(bi[5]*0.707));
r=((br[7]*(-0.707))-(bi[7]*(-0.707)));
s=((br[7]*(-0.707))+(bi[7]*(-0.707)));
Xr[0]=br[0]+br[4];Xi[0]=0; 
Xr[1]=p+br[1];Xi[1]=q+bi[1];
Xr[2]=br[2];Xi[2]=-br[6];
Xr[3]=r+br[3];Xi[3]=s+bi[3];
Xr[4]=br[0]-br[4];Xi[4]=0;
Xr[5]=br[1]-p;Xi[5]=bi[1]-q;
Xr[6]=br[2];Xi[6]=br[6];
Xr[7]=br[3]-r;Xi[7]=bi[3]-s; 
printf("8 point DITFFT");
for(i=0;i<8;i++)
printf("\n%.3f+(%.3fi)",Xr[i],Xi[i]);
printf("\nMagnitude and phase");
for(i=0;i<8;i++)
{Mag[i]=sqrt((Xr[i]*Xr[i])+(Xi[i]*Xi[i]));
 pha[i]=(atan(Xi[i]/Xr[i])*180)/pi;
 if(Xi[i]==0) pha[i]=0;
 if(Xr[i]>=0 && Xi[i]>=0) pha[i]=pha[i];
 else if(Xr[i]>=0 && Xi[i]<=0) pha[i]=360+pha[i];
 else pha[i]=180+pha[i];
 printf("\n%.3f\t%.3f",Mag[i],pha[i]);}}
